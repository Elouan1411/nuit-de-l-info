<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Moniteur système</title>
    <style>
      body {
        background-color: #2d2d2d;
        color: #ecf0f1;
        font-family: "Ubuntu", sans-serif;
        margin: 0;
        padding: 20px;
        display: flex;
        flex-direction: column;
        gap: 20px;
        height: 100vh;
        box-sizing: border-box;
      }

      .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid #444;
        padding-bottom: 10px;
        margin-bottom: 10px;
      }

      .header h2 {
        margin: 0;
        font-weight: 300;
      }

      .grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        flex-grow: 1;
      }

      .card {
        background: #3c3c3c;
        border-radius: 8px;
        padding: 15px;
        display: flex;
        flex-direction: column;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
      }

      .card-title {
        font-size: 14px;
        color: #aaa;
        margin-bottom: 15px;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .chart-container {
        flex-grow: 1;
        position: relative;
        background: #222;
        border-radius: 4px;
        overflow: hidden;
        display: flex;
        align-items: flex-end;
      }

      .bar {
        flex-grow: 1;
        background: #3498db;
        margin: 0 1px;
        transition: height 0.2s ease;
      }

      .cpu .bar {
        background: #e74c3c;
      }

      .ram .bar {
        background: #f1c40f;
      }

      .disk .bar {
        background: #9b59b6;
      }

      .net .bar {
        background: #2ecc71;
      }

      .value-display {
        font-size: 24px;
        font-weight: bold;
        margin-top: 10px;
        text-align: right;
      }

      .info-row {
        display: flex;
        justify-content: space-between;
        font-size: 12px;
        color: #888;
        margin-top: 5px;
      }
    </style>
  </head>

  <body>
    <div class="header">
      <h2>System Monitor</h2>
      <span style="font-size: 12px; color: #888">localhost</span>
    </div>

    <div class="grid">
      <!-- CPU -->
      <div class="card cpu">
        <div class="card-title">CPU</div>
        <div class="chart-container" id="cpu-chart">
          <!-- Bars generated by JS -->
        </div>
        <div class="value-display" id="cpu-value">0%</div>
        <div class="info-row">
          <span>Intel Core i9-14900K</span>
          <span>24 Cores</span>
        </div>
      </div>

      <!-- RAM -->
      <div class="card ram">
        <div class="card-title">Mémoire</div>
        <div class="chart-container" id="ram-chart"></div>
        <div class="value-display" id="ram-value">0%</div>
        <div class="info-row">
          <span>Total: 64 GB</span>
          <span>Utilisé: <span id="ram-used">0</span> GB</span>
        </div>
      </div>

      <!-- Disk -->
      <div class="card disk">
        <div class="card-title">Disque (NVMe)</div>
        <div class="chart-container" id="disk-chart"></div>
        <div class="value-display" id="disk-value">0%</div>
        <div class="info-row">
          <span>/dev/nvme0n1p2</span>
          <span>2 TB Total</span>
        </div>
      </div>

      <!-- Network -->
      <div class="card net">
        <div class="card-title">Réseau</div>
        <div class="chart-container" id="net-chart"></div>
        <div class="value-display" id="net-value">0 KB/s</div>
        <div class="info-row">
          <span>eth0</span>
          <span>10 Gbps</span>
        </div>
      </div>
    </div>

    <script>
      function createBars(containerId, count) {
        const container = document.getElementById(containerId);
        for (let i = 0; i < count; i++) {
          const bar = document.createElement("div");
          bar.className = "bar";
          bar.style.height = "5%";
          container.appendChild(bar);
        }
      }

      function updateChart(containerId, value) {
        const container = document.getElementById(containerId);
        const bars = container.getElementsByClassName("bar");

        // Shift heights left
        for (let i = 0; i < bars.length - 1; i++) {
          bars[i].style.height = bars[i + 1].style.height;
        }
        // Set new value
        bars[bars.length - 1].style.height = value + "%";
      }

      const BAR_COUNT = 40;
      createBars("cpu-chart", BAR_COUNT);
      createBars("ram-chart", BAR_COUNT);
      createBars("disk-chart", BAR_COUNT);
      createBars("net-chart", BAR_COUNT);

      setInterval(() => {
        // CPU
        const cpu = Math.floor(Math.random() * 30) + 10; // 10-40%
        updateChart("cpu-chart", cpu);
        document.getElementById("cpu-value").textContent = cpu + "%";

        // RAM
        const ram = Math.floor(Math.random() * 10) + 20; // 20-30%
        updateChart("ram-chart", ram);
        document.getElementById("ram-value").textContent = ram + "%";
        document.getElementById("ram-used").textContent = (
          64 *
          (ram / 100)
        ).toFixed(1);

        // Disk - mostly stable
        const disk = 45;
        updateChart("disk-chart", disk);
        document.getElementById("disk-value").textContent = disk + "%";

        // Network - spiky
        const net =
          Math.random() > 0.8
            ? Math.floor(Math.random() * 80) + 20
            : Math.floor(Math.random() * 10);
        updateChart("net-chart", net);
        document.getElementById("net-value").textContent =
          (net * 1.5).toFixed(1) + " MB/s";
      }, 1000);
    </script>
  </body>
</html>
